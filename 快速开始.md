# ğŸš€ GitHub Actions è‡ªåŠ¨æ„å»º - å¿«é€Ÿå¼€å§‹

## ä¸€é”®å‘å¸ƒæ–°ç‰ˆæœ¬

```bash
./release.sh v1.0.0
```

å°±è¿™ä¹ˆç®€å•ï¼è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… æ›´æ–° `package.json`ã€`src-tauri/tauri.conf.json` å’Œ `src-tauri/Cargo.toml` çš„ç‰ˆæœ¬å·
- âœ… æäº¤æ›´æ”¹åˆ° Git
- âœ… åˆ›å»º Git Tag
- âœ… æ¨é€åˆ° GitHub
- âœ… è§¦å‘ GitHub Actions è‡ªåŠ¨æ„å»º

---

## ğŸ“¦ æ„å»ºå¹³å°

GitHub Actions ä¼šè‡ªåŠ¨æ„å»ºä»¥ä¸‹å¹³å°ï¼š

| å¹³å° | æ¶æ„ | äº§ç‰©æ ¼å¼ |
|------|------|---------|
| **Windows** | x64 | `.msi`, `.exe` |
| **macOS** | ARM64 (M1/M2/M3/M4) | `.dmg` |
| **macOS** | x64 (Intel) | `.dmg` |
| **Linux** | x64 | `.AppImage`, `.deb` |

---

## ğŸ¯ ä½¿ç”¨æµç¨‹

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰â­

```bash
# 1. ç¡®ä¿ä»£ç å·²æäº¤
git status

# 2. è¿è¡Œå‘å¸ƒè„šæœ¬
./release.sh v1.0.0

# 3. æŒ‰æç¤ºç¡®è®¤æ“ä½œ
# 4. ç­‰å¾… GitHub Actions æ„å»ºå®Œæˆï¼ˆ15-25åˆ†é’Ÿï¼‰
```

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨æ“ä½œ

```bash
# 1. æ‰‹åŠ¨æ›´æ–°ç‰ˆæœ¬å·
# ç¼–è¾‘ä»¥ä¸‹æ–‡ä»¶ä¸­çš„ version å­—æ®µï¼š
# - package.json
# - src-tauri/tauri.conf.json
# - src-tauri/Cargo.toml

# 2. æäº¤æ›´æ”¹
git add .
git commit -m "chore: bump version to v1.0.0"

# 3. åˆ›å»º tag
git tag v1.0.0

# 4. æ¨é€åˆ° GitHub
git push origin main
git push origin v1.0.0
```

### æ–¹æ³•ä¸‰ï¼šGitHub æ‰‹åŠ¨è§¦å‘

1. æ‰“å¼€ GitHub ä»“åº“é¡µé¢
2. ç‚¹å‡» **Actions** æ ‡ç­¾
3. é€‰æ‹© **Build and Release** å·¥ä½œæµ
4. ç‚¹å‡» **Run workflow** æŒ‰é’®
5. è¾“å…¥ç‰ˆæœ¬å·ï¼ˆä¾‹å¦‚ï¼šv1.0.0ï¼‰
6. ç‚¹å‡»è¿è¡Œ

---

## ğŸ“Š æŸ¥çœ‹æ„å»ºè¿›åº¦

1. æ‰“å¼€ GitHub ä»“åº“
2. ç‚¹å‡» **Actions** æ ‡ç­¾
3. æŸ¥çœ‹æœ€æ–°çš„å·¥ä½œæµè¿è¡ŒçŠ¶æ€
4. ç‚¹å‡»å…·ä½“ä»»åŠ¡æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

**æ„å»ºæ—¶é—´**ï¼šçº¦ 15-25 åˆ†é’Ÿï¼ˆæ‰€æœ‰å¹³å°ï¼‰

---

## ğŸ“¥ ä¸‹è½½å®‰è£…åŒ…

æ„å»ºå®Œæˆåï¼š

1. æ‰“å¼€ GitHub ä»“åº“
2. ç‚¹å‡» **Releases** æ ‡ç­¾
3. æ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬
4. ä¸‹è½½éœ€è¦çš„å®‰è£…åŒ…

### æ–‡ä»¶å‘½åè§„åˆ™

- `ä½æ¥è¶³è¿¹-æ ¡èµ›ä½œå“ä¸‹è½½å™¨_1.0.0_x64_en-US.msi` - Windows MSI å®‰è£…åŒ…
- `ä½æ¥è¶³è¿¹-æ ¡èµ›ä½œå“ä¸‹è½½å™¨_1.0.0_x64-setup.exe` - Windows EXE å®‰è£…åŒ…
- `ä½æ¥è¶³è¿¹-æ ¡èµ›ä½œå“ä¸‹è½½å™¨_1.0.0_aarch64.dmg` - macOS ARM64
- `ä½æ¥è¶³è¿¹-æ ¡èµ›ä½œå“ä¸‹è½½å™¨_1.0.0_x64.dmg` - macOS Intel
- `ä½æ¥è¶³è¿¹-æ ¡èµ›ä½œå“ä¸‹è½½å™¨_1.0.0_amd64.AppImage` - Linux AppImage
- `ä½æ¥è¶³è¿¹-æ ¡èµ›ä½œå“ä¸‹è½½å™¨_1.0.0_amd64.deb` - Linux Debian åŒ…

---

## ğŸ” é…ç½®ç­¾åï¼ˆå¯é€‰ä½†æ¨èï¼‰

ä¸ºäº†å¯ç”¨è‡ªåŠ¨æ›´æ–°åŠŸèƒ½ï¼Œéœ€è¦é…ç½® Tauri ç­¾åå¯†é’¥ï¼š

### 1. ç”Ÿæˆå¯†é’¥å¯¹

```bash
python3 gen_key.py
```

è¿™ä¼šç”Ÿæˆï¼š
- `match_download.key` - ç§é’¥ï¼ˆ**ç»å¯¹ä¸è¦æäº¤åˆ° Gitï¼**ï¼‰
- `match_download.pub` - å…¬é’¥

### 2. é…ç½® GitHub Secrets

1. æ‰“å¼€ GitHub ä»“åº“è®¾ç½®
2. è¿›å…¥ **Settings** > **Secrets and variables** > **Actions**
3. ç‚¹å‡» **New repository secret**
4. æ·»åŠ ä»¥ä¸‹å¯†é’¥ï¼š

**TAURI_PRIVATE_KEY**
```bash
# å¤åˆ¶ç§é’¥å†…å®¹
cat match_download.key
# ç²˜è´´åˆ° Secret å€¼ä¸­
```

**TAURI_KEY_PASSWORD**
```
# å¦‚æœç”Ÿæˆå¯†é’¥æ—¶è®¾ç½®äº†å¯†ç ï¼Œå¡«å†™å¯†ç 
# å¦åˆ™ç•™ç©º
```

### 3. æ›´æ–°å…¬é’¥

å°†å…¬é’¥å†…å®¹æ›´æ–°åˆ° `src-tauri/tauri.conf.json`ï¼š

```json
{
  "plugins": {
    "updater": {
      "pubkey": "è¿™é‡Œç²˜è´´ match_download.pub çš„å†…å®¹"
    }
  }
}
```

---

## ğŸ“ ç‰ˆæœ¬å·è§„èŒƒ

éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/lang/zh-CN/)ï¼š

- `v1.0.0` - ä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢å·
- `v1.0.1` - ä¿®å¤ bugï¼Œå‘åå…¼å®¹
- `v1.1.0` - æ–°å¢åŠŸèƒ½ï¼Œå‘åå…¼å®¹
- `v2.0.0` - é‡å¤§æ›´æ–°ï¼Œå¯èƒ½ä¸å…¼å®¹

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
cat package.json | grep version

# æŸ¥çœ‹æ‰€æœ‰ tags
git tag -l

# åˆ é™¤æœ¬åœ° tag
git tag -d v1.0.0

# åˆ é™¤è¿œç¨‹ tagï¼ˆè°¨æ…ï¼ï¼‰
git push origin :refs/tags/v1.0.0

# æŸ¥çœ‹ Git çŠ¶æ€
git status

# æŸ¥çœ‹æäº¤å†å²
git log --oneline -10
```

---

## â“ å¸¸è§é—®é¢˜

### Q: æ„å»ºå¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**A:** 
1. æŸ¥çœ‹ Actions æ—¥å¿—ä¸­çš„å…·ä½“é”™è¯¯ä¿¡æ¯
2. ç¡®ä¿ `package.json`ã€`tauri.conf.json`ã€`Cargo.toml` é…ç½®æ­£ç¡®
3. æ£€æŸ¥ä¾èµ–æ˜¯å¦éƒ½å·²æ­£ç¡®å£°æ˜
4. åœ¨æœ¬åœ°è¿è¡Œ `npm run tauri build` æµ‹è¯•

### Q: Tag å·²ç»å­˜åœ¨æ€ä¹ˆåŠï¼Ÿ

**A:**
```bash
# åˆ é™¤æœ¬åœ° tag
git tag -d v1.0.0

# å¦‚æœå·²æ¨é€åˆ°è¿œç¨‹ï¼Œåˆ é™¤è¿œç¨‹ tag
git push origin :refs/tags/v1.0.0

# é‡æ–°åˆ›å»º tag
git tag v1.0.0
git push origin v1.0.0
```

### Q: å¦‚ä½•åªæ„å»ºæŸä¸ªå¹³å°ï¼Ÿ

**A:** ä¿®æ”¹ `.github/workflows/build.yml`ï¼Œæ³¨é‡Šæ‰ä¸éœ€è¦çš„å¹³å°é…ç½®ã€‚

### Q: æ„å»ºäº§ç‰©åœ¨å“ªé‡Œï¼Ÿ

**A:** 
- **GitHub Releases**: è‡ªåŠ¨ä¸Šä¼ åˆ°å¯¹åº”ç‰ˆæœ¬çš„ Release
- **Artifacts**: åœ¨ Actions è¿è¡Œé¡µé¢å¯ä»¥ä¸‹è½½ï¼ˆä¿ç•™ 7 å¤©ï¼‰

### Q: å¦‚ä½•å–æ¶ˆå·²ç»å¼€å§‹çš„æ„å»ºï¼Ÿ

**A:** 
1. æ‰“å¼€ Actions æ ‡ç­¾
2. æ‰¾åˆ°æ­£åœ¨è¿è¡Œçš„å·¥ä½œæµ
3. ç‚¹å‡»å³ä¸Šè§’çš„ **Cancel workflow**

### Q: æœ¬åœ°å¦‚ä½•æµ‹è¯•æ„å»ºï¼Ÿ

**A:**
```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼è¿è¡Œ
npm run tauri dev

# æ„å»ºå½“å‰å¹³å°
npm run tauri build
```

---

## ğŸ‰ é¦–æ¬¡ä½¿ç”¨æ£€æŸ¥æ¸…å•

- [ ] ä»£ç å·²æ¨é€åˆ° GitHub
- [ ] `.github/workflows/build.yml` å·²åˆ›å»º
- [ ] `release.sh` å·²æ·»åŠ æ‰§è¡Œæƒé™ï¼ˆ`chmod +x release.sh`ï¼‰
- [ ] `.gitignore` å·²é…ç½®ï¼ˆåŒ…å« `*.key` å’Œ `*.pub`ï¼‰
- [ ] ï¼ˆå¯é€‰ï¼‰å·²ç”Ÿæˆç­¾åå¯†é’¥å¹¶é…ç½®åˆ° GitHub Secrets
- [ ] ï¼ˆå¯é€‰ï¼‰å·²æ›´æ–° `tauri.conf.json` ä¸­çš„å…¬é’¥

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [è¯¦ç»†ä½¿ç”¨è¯´æ˜](./GITHUB_ACTIONS_ä½¿ç”¨è¯´æ˜.md)
- [é¡¹ç›® README](./README.md)
- [Tauri å®˜æ–¹æ–‡æ¡£](https://tauri.app/)
- [GitHub Actions æ–‡æ¡£](https://docs.github.com/cn/actions)

---

**ç¥ä½ æ„å»ºé¡ºåˆ©ï¼** ğŸš€
